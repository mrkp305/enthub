{% extends "layouts/default.html" %}
{% load static %}
{% block PAGE_TITLE %} My Profile &mdash; Ehub {% endblock PAGE_TITLE %}
{% block PAGE_CSS %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.css">
  <link rel="stylesheet" href="{% static 'css/customized/bootstrap/bootstrap.css' %}">
{% endblock PAGE_CSS %}
{% block PAGE_CONTENT %}
    <!-- Titlebar
================================================== -->
<div id="titlebar">
	<div class="container">
		<div class="row">
			<div class="col-md-12">

				<h2>My Profile</h2>

				<!-- Breadcrumbs -->
				<nav id="breadcrumbs">
					<ul>
						<li><a href="#">Home</a></li>
						<li>My Profile</li>
					</ul>
				</nav>

			</div>
		</div>
	</div>
</div>


<!-- Content
================================================== -->
<div class="container">
	<div class="row">


		<!-- Widget -->
		<div class="col-md-4">
			<div class="sidebar left">

				<div class="my-account-nav-container">
					
					<ul class="my-account-nav">
						<li class="sub-nav-title">Manage Account</li>
						<li><a href="{% url 'account:account-profile' %}" class="current"><i class="sl sl-icon-user"></i> My Profile</a></li>
						<li><a href="my-bookmarks.html"><i class="sl sl-icon-star"></i> Bookmarked Listings</a></li>
					</ul>
					
					<ul class="my-account-nav">
						<li class="sub-nav-title">Manage Listings</li>
						<li><a href="my-properties.html"><i class="sl sl-icon-docs"></i> My Properties</a></li>
						<li><a href="submit-property.html"><i class="sl sl-icon-action-redo"></i> Submit New Property</a></li>
					</ul>

					<ul class="my-account-nav">
						<li><a href="change-password.html"><i class="sl sl-icon-lock"></i> Change Password</a></li>
						<li><a href="#"><i class="sl sl-icon-power"></i> Log Out</a></li>
					</ul>

				</div>

			</div>
		</div>

		<div class="col-md-8">
			<div class="row">


				<div class="col-md-8 my-profile">
					<h4 class="margin-top-0 margin-bottom-30">My Account</h4>
					<form method="POST" action="">
						{% csrf_token %}
						<label>Your Name</label>
						{{ ProfileForm.name }}

						<label>Handle</label>
						{{ ProfileForm.handle }}

						<label>Email</label>
						{{ ProfileForm.email }}

						<label>Phone</label>
						{{ ProfileForm.phone }}

						<label>City</label>
						{{ ProfileForm.city }}

						<h4 class="margin-top-50 margin-bottom-25">About Me</h4>
						{{ ProfileForm.bio }}

						<h4 class="margin-top-50 margin-bottom-25">Interests</h4>
						{{ ProfileForm.tags }}
						

						<h4 class="margin-top-50 margin-bottom-0">Social</h4>

						<label><i class="fa fa-twitter"></i> Twitter</label>
						<input value="https://www.twitter.com/" type="text">

						<label><i class="fa fa-facebook-square"></i> Facebook</label>
						<input value="https://www.facebook.com/" type="text">

						<label><i class="fa fa-google-plus"></i> Google+</label>
						<input value="https://www.google.com/" type="text">

						<label><i class="fa fa-linkedin"></i> Linkedin</label>
						<input value="https://www.linkedin.com/" type="text">


						<button class="button margin-top-20 margin-bottom-20">Save Changes</button>
					</form>
				</div>

				<div class="col-md-4">
					<!-- Avatar -->
					<div class="edit-profile-photo">
						<img src="{% static 'images/agent-02.jpg' %}" alt="">
						<div class="change-photo-btn">
							<div class="photoUpload">
							    <span><i class="fa fa-upload"></i> Upload Photo</span>
							    <input id='image-file-ctrl' type="file" class="upload" />
							</div>
						</div>
					</div>
				
					<!-- Picture Modal -->
					<div class="modal fade" id="profilePictureModal" tabindex="-1" role="dialog" aria-labelledby="profilePictureModalTitle" aria-hidden="true">
						<div class="modal-dialog " role="document">
						<div class="modal-content">
							<div class="modal-header">
							<h5 class="modal-title" id="profilePictureModalTitle">Edit Profile Picture</h5>
							<!-- <button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button> -->
							</div>
							<div class="modal-body">
								<div id="upload-picture-area"></div>
							</div>
							<div class="modal-footer">
							<a class="button medium border" data-dismiss="modal">Close</a>
							<a class="button medium"><i class="fa fa-save"></i> Save Changes</a>
							</div>
						</div>
						</div>
					</div>
				</div>


			</div>
		</div>

	</div>
</div>
{% endblock PAGE_CONTENT %}

{% block PAGE_JS %}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/croppie/2.6.2/croppie.js"></script>
  <script type="text/javascript" src="{% static 'scripts/customized/bootstrap/bootstrap.js' %}"></script>
  <script>
		var $uploadCrop;
		function readFile(input) {
			if (input.files && input.files[0]) {
			  var reader = new FileReader();
		  
			  reader.onload = function (event) {
				$uploadCrop.croppie('bind', {
				  url: event.target.result
				});
			  };
		  
			  reader.readAsDataURL(input.files[0]);
			} else {
			  alert('Sorry - you\'re browser doesn\'t support the FileReader API');
			}
		}
		  
		$uploadCrop = $('#upload-picture-area').croppie({
			viewport: {
				width: 490,
				height: 490,
				type: 'circle'
			  },
			  boundary: {
				width: 550,
				height: 500
			  },
			enableExif: true
		});
		$('#image-file-ctrl').on('change', function() {
			
			$("#profilePictureModal").modal('show'); 
			readFile(this);
			
		});
  </script>
{% endblock PAGE_JS %}